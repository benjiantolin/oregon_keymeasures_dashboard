<!DOCTYPE html>
<html lang="en">
<head>
    <title>ObtC Education Measures</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--meta data for sharing links on Facebook-->
    <meta property="og:title" content="Oregon by the Counties"/>
    <meta property="og:url" content="http://benjiantolin.github.io/oregon_keymeasures_dashboard/index.html"/>
    <meta property="og:description" content="This is a storymap using sample measures from Oregon by the Numbers."/>


    <!--add required stylesheets-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <!--leaflet css-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.4.0/leaflet.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css">


    <!--add favicon for the web page-->
    <link rel="shortcut icon" href="img/oregon.ico" type="image/x-icon">

    <!--Fonts-->
    <link href="https://fonts.googleapis.com/css?family=Cairo|Lato" rel="stylesheet">


    <link rel="stylesheet" type="text/css" href="css/storymap.2.5.css">
    <!--add required libraries-->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.4.0/leaflet.js"></script>
    <!--jquery-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>

    <!--boostrap-->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <!--leaflet.ajax for asynchronously adding geojson data-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.1.0/leaflet.ajax.min.js"></script>

    <!--mini globle map-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/topojson/1.6.19/topojson.min.js"></script>
    <script src="js/globeminimap.js"></script>

    <!--story map plugin-->
    <script src="js/storymap.2.5.js"></script>
</head>
<body>

<div id="storymap" class="container-fluid">
    <div class="row">
        <div class="col-sm-6 col-md-4 storymap-story">
            <section data-scene="overview" data-background="assets/oregon_scenery.mp4">
                <div class="fullscreen text-center">
                  <div class="row justify-content-center align-items-center">
                    <span style="font-size: 2rem;">
                      <a href="index.html"><i class="fas fa-home"></i></a>
                      <a href="demographic.html"><i class="fas fa-users"></i></a>
                      <a href="social.html"><i class="fas fa-shopping-basket"></i></a>
                      <a href="economic.html"><i class="fas fa-chart-line"></i></a>
                      <a href="education.html"><i class="fas fa-user-graduate"></i></a>
                      <a href="health.html"><i class="fas fa-medkit"></i></a>
                      <a href="infrastructure.html"><i class="fas fa-road"></i></a>
                  </span>
                  </div>
                    <h1 class="display-4 d-flex justify-content-center">Education Measures</h1>
                    <h3 class="d-flex justify-content-center" style="color: rgba(255,255,255,0.95)">
                      <i>Oregon by the Counties</i>
                    </h3>
                </div>
            </section>
            <section data-scene="earlyed">
              <h2>Early Education</h2>
              <h5><i><b>Definition:</b>The percentage of three- and four-year-olds enrolled in
                                       early education programs (nursery school or preschool), based on
                                       parent report.</i></h5>
              <p>Early childhood education has lasting impacts that extend into primary
                 education and beyond. Preschool experience positively influences child
                 cognitive, language and social development in addition to preparation
                 for learning in an academic environment. </P>
              <p><i>* Preschool-age children are a very narrow group of the population. The
                 estimates for the proportion of these children enrolled in early education
                 in small counties (population under 10,000) have wide margins of error,
                 and readers should use caution when interpreting these statistics.</i></p>
            </section>

            <section data-scene="fouryrdeg">
              <h2>4-Year Degree or Greater</h2>
              <h5><i><b>Definition:</b>The percentage of the county population, age 25 or
                                       older, that has earned a four-year degree or greater educational
                                       attainment. Individuals included are those with a four-year
                                       (bachelor’s) degree, a master’s degree, a professional degree or a
                                       doctorate. </i></h5>
              <p>Individuals who have earned a four-year degree or higher experience
                 increased salaries and worker benefits, more mobility and improved
                 health. This measure is an important indicator of human capital and is
                 frequently used to describe a community’s labor force for purposes of
                 economic development.</p>
            </section>

            <section data-scene="twoyrdeg">
              <h2>2-Year Degree</h2>
              <h5><i><b>Definition:</b>The percentage of a county’s population, age 25 or
                                       older, that has earned a two-year degree.</i></h5>
              <p>An associate degree or other two-year credential confers benefits
                 similar to those connected with higher levels of education attainment,
                 but to a lesser degree. In Oregon, there is broad support for having
                 40% of the population earn two-year degrees or equivalent trade
                 certification.</p>
              <p>Unfortunately, the current proportion of the state
                 population with this level of education falls far short of this goal. The
                 discrepancy between aspiration and reality manifests in counties as
                 shortages of skilled labor and tradespeople.</p>
            </section>

            <section data-scene="gradrate">
              <h2>High School Graduation Rate</h2>
              <h5><i><b>Definition:</b>The percentage of students in a high school cohort who
                                       graduate with a regular or modified diploma, or who have met all
                                       diploma requirements but remained enrolled, within four years of
                                       their high school start year</i> </h5>
              <p>For generations, the four-year graduation rate has served as a key
                 measure of success for K-12 education institutions. Students who fail to
                 graduate before leaving high school will face significant challenges as
                 their adult life unfolds: gaining employment, continuing their education
                 and engaging in their community.</p>
              <p>As Oregon and the nation continue to
                 transition away from extractive and industrial economies, it becomes
                 increasingly important for students to graduate from high school on
                 time and ready to attend college and/or enter the workforce. </p>
            </section>

            <section data-scene="highered">
              <h2>Higher Education Enrollment</h2>
              <h5><i><b>Definition:</b>The number of students enrolled per 1,000 of
                                       population in public institutions of higher education located in the
                                       county. Students enrolled through satellite campuses are attributed
                                       to the county where the primary campus resides. OSU-Cascades is
                                       an exception, attributed to Deschutes County.</i> </h5>
              <p>Colleges and universities are important economic drivers for the
                 communities and regions where they are located. They offer a
                 stabilizing influence during downturns in the business cycle. </p>
              <p>Most
                 obviously they increase human capital by producing educated
                 graduates, but they also contribute to attracting a skilled labor force.
                 Many alumni remain in the communities where they graduate, adding
                 to the local economy through higher wages and tax revenue. </p>
                 <p>College
                    enrollment normalized to community population is a proxy indicator
                    of these positive influences. “No college” indicates that there is no
                    primary campus for a public community college or university in the
                    county. </p>
            </section>

            <section data-scene="end" data-background="img/mthood.jpg">
                <div class="fullscreen text-center">
                    <h1 class="display-4 d-flex justify-content-center">For more infromation about Oregon and its counties visit:</h1>
                    <h4 class="d-flex justify-content-center" style="color: rgba(255,255,255,0.95)">
                      <a href="https://www.tfff.org/select-books/book/oregon-numbers">Oregon by the Numbers 2018 Edition</a>
                    </h4>
                </div>
            </section>

        </div>
        <!--map div-->
        <div class="col-sm-6 col-md-8 storymap-map"></div>
    </div>

    <dl>
        <dt>
            <!--facebook icon-->
            <a class="fab fa-facebook-square btn"
               href="https://facebook.com/sharer.php?u=http://benjiantolin.github.io/oregon_keymeasures_dashboard/index.html"
               target="_blank"></a>
        </dt>
        <dt>
            <!--github icon-->
            <a class="fab fa-github btn" href="https://github.com/benjiantolin/oregon_keymeasures_dashboard" style="top:40px"
               target="_blank"></a>
        </dt>
        <dt>
            <!--info icon-->
            <i class="fas fa-info-circle btn" style="top:60px" data-toggle="modal" data-target="#info-modal"></i>
        </dt>
    </dl>

    <!--the info page-->
    <div class="modal fade" id="info-modal" role="dialog">
        <div class="modal-dialog modal-md">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">About</h4>
                </div>
                <div class="modal-body">
                  <p>This is a story map that contains a sample of key measures borrowed from the <a href="https://www.tfff.org/select-books/book/oregon-numbers">Oregon by the Numbers 2018 Edition</a> report.
                    <br><br>
                    A handful of the key measures provided in the report are further visualize the data using a
                    dynamic online interface. The goal of report is to get information to local community leaders, to
                    encorage data driven decision making.
                    <br><br>
                    This story map further extends the vision by creating an online interactive platform to visualize and analyze the key measures for Oregon counties.</p>
                  <p><b>storymap.js</b> | Released Date: 02/20/2017 | Version: 2.5 | MIT License </p>
                  <p><b>Author: Benjamin Antolin</b>| Oregon State University
                  </p>
                  <p>The <a href="https://youtu.be/V2vwFS8ae2I">background video</a> on the front page
                      was clipped from Youtube. </p>
                  <p>The context and data about key measures was collected from the Oregon by the Numbers 2018 Edition Report.</p>
                  <p>The favicon image was acquired from <a href="https://en.wikipedia.org/wiki/List_of_Oregon_state_symbols">Wikipedia</a></p>
                  <p>This story map uses geospatial data from cartodb and Oregon Explorer.</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- main javascript -->
<script type="text/javascript">

    //////////////////////////////////////////////////////////////////////////
    // Scene 2: Early education
    // Set function for color ramp
    function setColor1(density){
        //Tenary operation: condition ? valueIfTrue : valueIfFalse
        // condition ? value1 : value2
        return  density > 49.24 ? '#b30000' :
                density > 43.43 ? '#e34a33' :
                density > 37.03 ? '#fc8d59' :
                density > 24.01 ? '#fdcc8a' :
                '#fef0d9';
    }

    // Set style function that sets fill color property equal to Total Population
    function style1(feature) {
        return {
            fillColor: setColor1(feature.properties.Early_Edu),
            fillOpacity: 0.5,
            weight: 2,
            opacity: 0.8,
            color: '#605f5f',
            dashArray: '4'
        };
    }

    var counties_earlyed = L.geoJson.ajax('assets/counties.geojson',
        {
            style: style1,
            onEachFeature: function (feature, layer) {
                layer.bindTooltip(feature.properties.NAME+"<br> % Early Education: "+ feature.properties.Early_Edu.toFixed(2) + "%" , {className: 'feature-label', permanent: false, direction: 'center'});
            }
        });


    var counties_earlyed_legend = '<p><b>% Early Education</b></p>' +
        '<i style="background: #fef0d9; opacity: 0.5"></i><p><b><24.01</b></p>' +
        '<i style="background: #fdcc8a; opacity: 0.5"></i><p><b>24.02-37.03</b></p>' +
        '<i style="background: #fc8d59; opacity: 0.5"></i><p><b>37.04-43.43</b></p>' +
        '<i style="background: #e34a33; opacity: 0.5"></i><p><b>43.44-49.24</b></p>' +
        '<i style="background: #b30000; opacity: 0.5"></i><p><b>>49.24</b></p>';



        //////////////////////////////////////////////////////////////////////////
        // Scene 3: 4 year deg

        // Set function for color ramp
        function setColor2(density){
            //Tenary operation: condition ? valueIfTrue : valueIfFalse
            // condition ? value1 : value2
            return  density > 34.07 ? '#b30000' :
                    density > 26.07 ? '#e34a33' :
                    density > 19.19 ? '#fc8d59' :
                    density > 13.28 ? '#fdcc8a' :
                    '#fef0d9';
        }

        // Set style function that sets fill color property equal to percentage of rural population
        function style2(feature) {
            return {
                fillColor: setColor2(feature.properties.fouryrdeg),
                fillOpacity: 0.5,
                weight: 2,
                opacity: 0.8,
                color: '#605f5f',
                dashArray: '4'
            };
        }

        var counties_fouryrdeg = L.geoJson.ajax('assets/counties.geojson',
            {
                style: style2,
                onEachFeature: function (feature, layer) {
                    layer.bindTooltip(feature.properties.NAME+"<br> % 4 YR Degree+: "+ (feature.properties.fouryrdeg).toFixed(2) + "%", {className: 'feature-label', permanent: false, direction: 'center'});
                }
            });


        var counties_fouryrdeg_legend = '<p><b>% 4 YR Degree+</b></p>' +
        '<i style="background: #fef0d9; opacity: 0.5"></i><p><b><13.28</b></p>' +
        '<i style="background: #fdcc8a; opacity: 0.5"></i><p><b>13.29-19.19</b></p>' +
        '<i style="background: #fc8d59; opacity: 0.5"></i><p><b>19.2-26.07</b></p>' +
        '<i style="background: #e34a33; opacity: 0.5"></i><p><b>26.08-34.07</b></p>' +
        '<i style="background: #b30000; opacity: 0.5"></i><p><b>>34.07</b></p>';

            //////////////////////////////////////////////////////////////////////////
            // Scene 4: 2 Year deg

            // Set function for color ramp
            function setColor3(density){
                //Tenary operation: condition ? valueIfTrue : valueIfFalse
                // condition ? value1 : value2
                return  density > 9.66 ? '#b30000' :
                        density > 8.99 ? '#e34a33' :
                        density > 8.45 ? '#fc8d59' :
                        density > 7.46 ? '#fdcc8a' :
                        '#fef0d9';
            }

            // Set style function that sets fill color property equal to net migration
            function style3(feature) {
                return {
                    fillColor: setColor3(feature.properties.twoyrdeg),
                    fillOpacity: 0.5,
                    weight: 2,
                    opacity: 0.8,
                    color: '#605f5f',
                    dashArray: '4'
                };
            }

            var counties_twoyrdeg = L.geoJson.ajax('assets/counties.geojson',
                {
                    style: style3,
                    onEachFeature: function (feature, layer) {
                        layer.bindTooltip(feature.properties.NAME+"<br> % 2 YR Degree: "+ (feature.properties.twoyrdeg), {className: 'feature-label', permanent: false, direction: 'center'});
                    }
                });


            var counties_twoyrdeg_legend = '<p><b>% 2 YR Degree</b></p>' +
                '<i style="background: #fef0d9; opacity: 0.5"></i><p><b><7.46</b></p>' +
                '<i style="background: #fdcc8a; opacity: 0.5"></i><p><b>7.47-8.45</b></p>' +
                '<i style="background: #fc8d59; opacity: 0.5"></i><p><b>8.46-8.99</b></p>' +
                '<i style="background: #e34a33; opacity: 0.5"></i><p><b>9-9.66</b></p>'+
                '<i style="background: #b30000; opacity: 0.5"></i><p><b>>9.66</b></p>';

                // Scene 5: High School Grad Rate


                    // Set function for color ramp
                    function setColor4(density){
                        //Tenary operation: condition ? valueIfTrue : valueIfFalse
                        // condition ? value1 : value2
                        return  density > 84.48 ? '#b30000' :
                                density > 76.19 ? '#e34a33' :
                                density > 63.51 ? '#fc8d59' :
                                density > 18.11 ? '#fdcc8a' :
                                '#fef0d9';
                    }

                    // Set style function that sets fill color property equal to the housing cost burden
                    function style4(feature) {
                        return {
                            fillColor: setColor4(feature.properties.gradrate),
                            fillOpacity: 0.5,
                            weight: 2,
                            opacity: 0.8,
                            color: '#605f5f',
                            dashArray: '4'
                        };
                    }

                    var counties_gradrate = L.geoJson.ajax('assets/counties.geojson',
                        {
                            style: style4,
                            onEachFeature: function (feature, layer) {
                                layer.bindTooltip(feature.properties.NAME+"<br> HS Grad Rate: "+ (feature.properties.gradrate).toFixed(2)+ "%", {className: 'feature-label', permanent: false, direction: 'center'});
                            }
                        });


                    var counties_gradrate_legend = '<p><b>HS Grad Rate</b></p>' +
                        '<i style="background: #fef0d9; opacity: 0.5"></i><p><b><18.11</b></p>' +
                        '<i style="background: #fdcc8a; opacity: 0.5"></i><p><b>18.12-63.51</b></p>' +
                        '<i style="background: #fc8d59; opacity: 0.5"></i><p><b>63.52-76.19</b></p>' +
                        '<i style="background: #e34a33; opacity: 0.5"></i><p><b>76.2-84.48</b></p>'+
                        '<i style="background: #b30000; opacity: 0.5"></i><p><b>>84.48</b></p>';

                //////////////////////////////////////////////////////////////////////////

                // Scene 6: Higher Education Enrollment


                    // Set function for color ramp
                    function setColor5(density){
                        //Tenary operation: condition ? valueIfTrue : valueIfFalse
                        // condition ? value1 : value2
                        return  density > 123.31 ? '#b30000' :
                                density > 68.6 ? '#e34a33' :
                                density > 40.01 ? '#fc8d59' :
                                density > 10.22 ? '#fdcc8a' :
                                '#fef0d9';
                    }

                    // Set style function that sets fill color property equal to the housing cost burden
                    function style5(feature) {
                        return {
                            fillColor: setColor5(feature.properties.highered),
                            fillOpacity: 0.5,
                            weight: 2,
                            opacity: 0.8,
                            color: '#605f5f',
                            dashArray: '4'
                        };
                    }

                    var counties_highered = L.geoJson.ajax('assets/counties.geojson',
                        {
                            style: style5,
                            onEachFeature: function (feature, layer) {
                                layer.bindTooltip(feature.properties.NAME+"<br> Higher Ed Enrollment: "+ (feature.properties.highered).toFixed(2), {className: 'feature-label', permanent: false, direction: 'center'});
                            }
                        });


                    var counties_highered_legend = '<p><b>Higher Ed Enrollment</b></p>' +
                        '<i style="background: #fef0d9; opacity: 0.5"></i><p><b><10.22</b></p>' +
                        '<i style="background: #fdcc8a; opacity: 0.5"></i><p><b>10.23-40.01</b></p>' +
                        '<i style="background: #fc8d59; opacity: 0.5"></i><p><b>40.02-68.6</b></p>' +
                        '<i style="background: #e34a33; opacity: 0.5"></i><p><b>68.7-123.31</b></p>'+
                        '<i style="background: #b30000; opacity: 0.5"></i><p><b>>123.31</b></p>';

                //////////////////////////////////////////////////////////////////////////

    var layers = {

        counties_earlyed: {
            layer: counties_earlyed, legend: counties_earlyed_legend
        },
        counties_fouryrdeg: {
            layer: counties_fouryrdeg, legend: counties_fouryrdeg_legend
        },
        counties_twoyrdeg: {
            layer: counties_twoyrdeg, legend: counties_twoyrdeg_legend
        },
        counties_gradrate: {
            layer: counties_gradrate, legend: counties_gradrate_legend
        },
        counties_highered: {
            layer: counties_highered, legend: counties_highered_legend
        },


        cartodb_light: {layer: L.tileLayer('http://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}@2x.png')}
    };

    var scenes = {
        overview: {lat: 44.0000000, lng: -123.5000000, zoom: 7, name: 'Cover Page', layers: []},
        earlyed: {lat: 44.0000000, lng: -123.5000000, zoom: 7, name: 'Early Education', layers: [layers.counties_earlyed]},
        fouryrdeg: {lat: 44.0000000, lng: -123.5000000, zoom: 7, name: '4 YR Degree+', layers: [layers.counties_fouryrdeg]},
        twoyrdeg: {lat: 44.0000000, lng: -123.5000000, zoom: 7, name: '2 YR Degree', layers: [layers.counties_twoyrdeg]},
        gradrate: {lat: 44.0000000, lng: -123.5000000, zoom: 7, name: 'HS Grad Rate', layers: [layers.counties_gradrate]},
        highered: {lat: 44.0000000, lng: -123.5000000, zoom: 7, name: 'Higher Ed Enrollment', layers: [layers.counties_highered]},
        end: {lat: 44.0000000, lng: -123.5000000, zoom: 7, name: 'The End'}
    };

    $('#storymap').storymap({
        scenes: scenes,
        baselayer: layers.cartodb_light,
        legend: true, // if you do not want a legend feature, you can simply not define the createLegend function.
        credits: "Data & Content: Oregon by the Numbers 2018 | Basemap: CartoDB &copy; | Created by Benji Antolin |",
        loader: true,
        scalebar: false,
        flyo: true,
        navwidget: true,

        createMap: function () {
            // create a map in the "map" div, set the view to a given place and zoom
            var map = L.map($(".storymap-map")[0], {
                zoomControl: false, scrollWheelZoom: false, fadeAnimation: true,
                zoomAnimation: true
            }).setView([44, -120], 7);

            //add an miniglobe
            new L.Control.GlobeMiniMap({
                marker: 'red',
                position: 'bottomright'
            }).addTo(map);


            return map;
        }
    });
</script>
</body>
</html>
